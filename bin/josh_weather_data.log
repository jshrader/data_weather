------------------------------------------------------------------------------------
      name:  <unnamed>
       log:  /Users/jgs/google_drive/research/data/weather/bin/josh_weather_data.log
  log type:  text
 opened on:   9 Aug 2015, 16:09:45

. 
. * This is kludgey, but I need a datelist. This should be generated from dir
. local datelist "201403 201404 201405 201406 201407 201408 201409 201410 201411 201
> 412 201501 201502 201503 201504 201505 201506"

. 
. * We can add some code eventually to download the files directly.
. * Just modify this code:
. if `download’ == 1 {
`download’ invalid name
r(198);

end of do-file

r(198);

. do ~/google_drive/research/data/weather/bin/josh_data.do

. * Stata program to collapse and combine daily weather data for the US
. *
. * Jeff Shrader
. * First: 2015/07/21
. * Time-stamp: <2015-08-09 16:09:59 jgs>
. 
. * Preliminaries
. local dir "~/google_drive/research/data/weather"

. local data_ext "/Volumes/Data 2TB/data/weather"

. cd "`data_ext'"
/Volumes/Data 2TB/data/weather

. local download 0

. capture log close
------------------------------------------------------------------------------------
      name:  <unnamed>
       log:  /Users/jgs/google_drive/research/data/weather/bin/josh_weather_data.log
  log type:  text
 opened on:   9 Aug 2015, 16:10:22

. 
. * This is kludgey, but I need a datelist. This should be generated from dir
. local datelist "201403 201404 201405 201406 201407 201408 201409 201410 201411 201
> 412 201501 201502 201503 201504 201505 201506"

. 
. * We can add some code eventually to download the files directly.
. * Just modify this code:
. if `download’ == 1 {
`download’ invalid name
r(198);

end of do-file

r(198);

. do ~/google_drive/research/data/weather/bin/josh_data.do

. * Stata program to collapse and combine daily weather data for the US
. *
. * Jeff Shrader
. * First: 2015/07/21
. * Time-stamp: <2015-08-09 16:10:34 jgs>
. 
. * Preliminaries
. local dir "~/google_drive/research/data/weather"

. local data_ext "/Volumes/Data 2TB/data/weather"

. cd "`data_ext'"
/Volumes/Data 2TB/data/weather

. local download 0

. capture log close
------------------------------------------------------------------------------------
      name:  <unnamed>
       log:  /Users/jgs/google_drive/research/data/weather/bin/josh_weather_data.log
  log type:  text
 opened on:   9 Aug 2015, 16:10:37

. 
. * This is kludgey, but I need a datelist. This should be generated from dir
. local datelist "201403 201404 201405 201406 201407 201408 201409 201410 201411 201
> 412 201501 201502 201503 201504 201505 201506"

. 
. * We can add some code eventually to download the files directly.
. * Just modify this code:
. if "`download’" == 1 {
type mismatch
r(109);

end of do-file

r(109);

. do ~/google_drive/research/data/weather/bin/josh_data.do

. * Stata program to collapse and combine daily weather data for the US
. *
. * Jeff Shrader
. * First: 2015/07/21
. * Time-stamp: <2015-08-09 16:10:56 jgs>
. 
. * Preliminaries
. local dir "~/google_drive/research/data/weather"

. local data_ext "/Volumes/Data 2TB/data/weather"

. cd "`data_ext'"
/Volumes/Data 2TB/data/weather

. local download 0

. capture log close
------------------------------------------------------------------------------------
      name:  <unnamed>
       log:  /Users/jgs/google_drive/research/data/weather/bin/josh_weather_data.log
  log type:  text
 opened on:   9 Aug 2015, 16:10:58

. 
. * This is kludgey, but I need a datelist. This should be generated from dir
. local datelist "201403 201404 201405 201406 201407 201408 201409 201410 201411 201
> 412 201501 201502 201503 201504 201505 201506"

. 
. * We can add some code eventually to download the files directly.
. * Just modify this code:
. if "`download’" == "1" {
.    cd "`dir'/data/raw"
.    foreach i of local pollutants  {
  2.       foreach t of local years {
  3.          shell /usr/local/bin/wget -Odaily_`i'_`t'.zip "http://aqsdr1.epa.gov/a
> qsweb/aqstmp/airdata/daily_`i'_`t'.zip"
  4.       }
  5.    }
. }

. 
. * Unpack the data, collapse the hourly, and combine with the daily
. * Unzip
. /*
> local filelist: dir . files "QCLCD*.zip"
> foreach i of local filelist {
>    di "`i'"
>    * shell gzip -d `i'
>    shell unzip `i'
>    * unzipfile `i'
> }
> */
. * Iterate through, grabbing humidity and cloud cover from hourly
. foreach i of local datelist {
  2.    di "`i'"
  3.    import delimited using "QCLCD`i'/`i'hourly.txt", clear
  4.    keep wban date time stationtype drybulbcelsius hourlyprecip skycondition vis
> ibility relativehumidity
  5.    destring drybulbcelsius, replace ignore("M")
  6.    replace hourlyprecip = strtrim(hourlyprecip)
  7.    replace hourlyprecip = "0.001" if hourlyprecip == "T"
  8.    destring hourlyprecip, replace ignore("M")
  9.    destring relativehumidity, replace ignore("M")
 10.    gen clear = (substr(skycondition,1,3) == "CLR" | substr(skycondition,1,2) ==
>  "VV" | substr(skycondition,1,3) == "FEW")
 11.    replace clear = . if skycondition == "M"
 12.    gen clouds = 1 - clear
 13.    * Destring visibility as alternative to clouds
.    destring visibility, replace ignore("M")
 14.    * There are repeat observations for reasons that aren't totally clear
.    duplicates drop
 15.    bysort wban date time: gen count = _N
 16.    tab count
 17.    tostring date, replace
 18.    gen date1 = date(date, "YMD")
 19.    format date1 %d
 20.    drop date
 21.    rename date1 date
 22. 
.    export delimited using "`i'hourly_proc.csv", replace
 23. }
201403
(44 vars, 4224185 obs)
drybulbcelsius: characters M removed; replaced as double
(18123 missing values generated)
(4,111,212 real changes made)
variable hourlyprecip was str4 now str5
(78,149 real changes made)
hourlyprecip has all characters numeric; replaced as double
(4033063 missing values generated)
relativehumidity: characters M removed; replaced as byte
(1874915 missing values generated)
(1,831,189 real changes made, 1,831,189 to missing)
(1,831,189 missing values generated)
visibility: characters M removed; replaced as double
(1811931 missing values generated)

Duplicates in terms of all variables

(746 observations deleted)

      count |      Freq.     Percent        Cum.
------------+-----------------------------------
          1 |  4,221,677       99.96       99.96
          2 |      1,762        0.04      100.00
------------+-----------------------------------
      Total |  4,223,439      100.00
date was long now str8
(note: file 201403hourly_proc.csv not found)
file 201403hourly_proc.csv saved
201404
(44 vars, 3999576 obs)
drybulbcelsius: characters M removed; replaced as double
(15775 missing values generated)
(3,860,982 real changes made)
variable hourlyprecip was str4 now str5
(61,151 real changes made)
hourlyprecip has all characters numeric; replaced as double
(3799831 missing values generated)
relativehumidity: characters M removed; replaced as byte
(1726589 missing values generated)
(1,686,587 real changes made, 1,686,587 to missing)
(1,686,587 missing values generated)
visibility: characters M removed; replaced as double
(1671296 missing values generated)

Duplicates in terms of all variables

(690 observations deleted)

      count |      Freq.     Percent        Cum.
------------+-----------------------------------
          1 |  3,997,498       99.97       99.97
          2 |      1,388        0.03      100.00
------------+-----------------------------------
      Total |  3,998,886      100.00
date was long now str8
(note: file 201404hourly_proc.csv not found)
--Break--
r(1);

end of do-file

--Break--
r(1);

. do ~/google_drive/research/data/weather/bin/josh_data.do

. * Stata program to collapse and combine daily weather data for the US
. *
. * Jeff Shrader
. * First: 2015/07/21
. * Time-stamp: <2015-08-09 16:30:28 jgs>
. 
. * Preliminaries
. local dir "~/google_drive/research/data/weather"

. local data_ext "/Volumes/Data 2TB/data/weather"

. cd "`data_ext'"
/Volumes/Data 2TB/data/weather

. local download 0

. capture log close
------------------------------------------------------------------------------------
      name:  <unnamed>
       log:  /Users/jgs/google_drive/research/data/weather/bin/josh_weather_data.log
  log type:  text
 opened on:   9 Aug 2015, 16:30:39

. 
. * This is kludgey, but I need a datelist. This should be generated from dir
. local datelist "201403 201404 201405 201406 201407 201408 201409 201410 201411 201
> 412 201501 201502 201503 201504 201505 201506"

. 
. * We can add some code eventually to download the files directly.
. * Just modify this code:
. if "`download’" == "1" {
.    cd "`dir'/data/raw"
.    foreach i of local pollutants  {
  2.       foreach t of local years {
  3.          shell /usr/local/bin/wget -Odaily_`i'_`t'.zip "http://aqsdr1.epa.gov/a
> qsweb/aqstmp/airdata/daily_`i'_`t'.zip"
  4.       }
  5.    }
. }

. 
. * Unpack the data, collapse the hourly, and combine with the daily
. * Unzip
. /*
> local filelist: dir . files "QCLCD*.zip"
> foreach i of local filelist {
>    di "`i'"
>    * shell gzip -d `i'
>    shell unzip `i'
>    * unzipfile `i'
> }
> */
. * Iterate through, grabbing humidity and cloud cover from hourly
. foreach i of local datelist {
  2.    di "`i'"
  3.    import delimited using "QCLCD`i'/`i'hourly.txt", clear
  4.    keep wban date time stationtype drybulbcelsius hourlyprecip skycondition vis
> ibility relativehumidity
  5.    destring drybulbcelsius, replace ignore("M")
  6.    replace hourlyprecip = strtrim(hourlyprecip)
  7.    replace hourlyprecip = "0.001" if hourlyprecip == "T"
  8.    destring hourlyprecip, replace ignore("M")
  9.    destring relativehumidity, replace ignore("M")
 10.    gen clear = (substr(skycondition,1,3) == "CLR" | substr(skycondition,1,2) ==
>  "VV" | substr(skycondition,1,3) == "FEW")
 11.    replace clear = . if skycondition == "M"
 12.    gen clouds = 1 - clear
 13.    * Destring visibility as alternative to clouds
.    destring visibility, replace ignore("M")
 14.    * There are repeat observations for reasons that aren't totally clear
.    duplicates drop
 15.    bysort wban date time: gen count = _N
 16.    tab count
 17.    tostring date, replace
 18.    gen date1 = date(date, "YMD")
 19.    format date1 %d
 20.    drop date
 21.    rename date1 date
 22.    drop count clear skycondition
 23.    rename hourlyprecip precipitation
 24.    rename drybulbcelsius temp_celsius
 25.    * Collapsing to hourly
.    gen hour = floor(time)
 26.    collapse (mean) temp_celsius precipitation visibility relativehumidity cloud
> s, by(wban date hour stationtype)
 27.    
.    export delimited using "`i'hourly_proc.csv", replace
 28. }
201403
(44 vars, 4224185 obs)
drybulbcelsius: characters M removed; replaced as double
(18123 missing values generated)
(4,111,212 real changes made)
variable hourlyprecip was str4 now str5
(78,149 real changes made)
hourlyprecip has all characters numeric; replaced as double
(4033063 missing values generated)
relativehumidity: characters M removed; replaced as byte
(1874915 missing values generated)
(1,831,189 real changes made, 1,831,189 to missing)
(1,831,189 missing values generated)
visibility: characters M removed; replaced as double
(1811931 missing values generated)

Duplicates in terms of all variables

(746 observations deleted)

      count |      Freq.     Percent        Cum.
------------+-----------------------------------
          1 |  4,221,677       99.96       99.96
          2 |      1,762        0.04      100.00
------------+-----------------------------------
      Total |  4,223,439      100.00
date was long now str8
file 201403hourly_proc.csv saved
201404
--Break--
r(1);

end of do-file

--Break--
r(1);

. do ~/google_drive/research/data/weather/bin/josh_data.do

. * Stata program to collapse and combine daily weather data for the US
. *
. * Jeff Shrader
. * First: 2015/07/21
. * Time-stamp: <2015-08-09 16:39:27 jgs>
. 
. * Preliminaries
. local dir "~/google_drive/research/data/weather"

. local data_ext "/Volumes/Data 2TB/data/weather"

. cd "`data_ext'"
/Volumes/Data 2TB/data/weather

. local download 0

. capture log close
------------------------------------------------------------------------------------
      name:  <unnamed>
       log:  /Users/jgs/google_drive/research/data/weather/bin/josh_weather_data.log
  log type:  text
 opened on:   9 Aug 2015, 16:39:31

. 
. * This is kludgey, but I need a datelist. This should be generated from dir
. local datelist "201403 201404 201405 201406 201407 201408 201409 201410 201411 201
> 412 201501 201502 201503 201504 201505 201506"

. 
. * We can add some code eventually to download the files directly.
. * Just modify this code:
. if "`download’" == "1" {
.    cd "`dir'/data/raw"
.    foreach i of local pollutants  {
  2.       foreach t of local years {
  3.          shell /usr/local/bin/wget -Odaily_`i'_`t'.zip "http://aqsdr1.epa.gov/a
> qsweb/aqstmp/airdata/daily_`i'_`t'.zip"
  4.       }
  5.    }
. }

. 
. * Unpack the data, collapse the hourly, and combine with the daily
. * Unzip
. /*
> local filelist: dir . files "QCLCD*.zip"
> foreach i of local filelist {
>    di "`i'"
>    * shell gzip -d `i'
>    shell unzip `i'
>    * unzipfile `i'
> }
> */
. * Iterate through, grabbing humidity and cloud cover from hourly
. foreach i of local datelist {
  2.    di "`i'"
  3.    import delimited using "QCLCD`i'/`i'hourly.txt", clear
  4.    keep wban date time stationtype drybulbcelsius hourlyprecip skycondition vis
> ibility relativehumidity
  5.    destring drybulbcelsius, replace ignore("M")
  6.    replace hourlyprecip = strtrim(hourlyprecip)
  7.    replace hourlyprecip = "0.001" if hourlyprecip == "T"
  8.    destring hourlyprecip, replace ignore("M")
  9.    destring relativehumidity, replace ignore("M")
 10.    gen clear = (substr(skycondition,1,3) == "CLR" | substr(skycondition,1,2) ==
>  "VV" | substr(skycondition,1,3) == "FEW")
 11.    replace clear = . if skycondition == "M"
 12.    gen clouds = 1 - clear
 13.    * Destring visibility as alternative to clouds
.    destring visibility, replace ignore("M")
 14.    * There are repeat observations for reasons that aren't totally clear
.    duplicates drop
 15.    bysort wban date time: gen count = _N
 16.    tab count
 17.    tostring date, replace
 18.    gen date1 = date(date, "YMD")
 19.    format date1 %d
 20.    drop date
 21.    rename date1 date
 22.    drop count clear skycondition
 23.    rename hourlyprecip precipitation
 24.    rename drybulbcelsius temp_celsius
 25.    * Collapsing to hourly
.    replace hour = hour/100
 26.    gen hour = floor(time)
 27.    collapse (mean) temp_celsius precipitation visibility relativehumidity cloud
> s, by(wban date hour stationtype)
 28.    
.    export delimited using "`i'hourly_proc.csv", replace
 29. }
201403
(44 vars, 4224185 obs)
drybulbcelsius: characters M removed; replaced as double
(18123 missing values generated)
(4,111,212 real changes made)
variable hourlyprecip was str4 now str5
(78,149 real changes made)
hourlyprecip has all characters numeric; replaced as double
(4033063 missing values generated)
relativehumidity: characters M removed; replaced as byte
(1874915 missing values generated)
(1,831,189 real changes made, 1,831,189 to missing)
(1,831,189 missing values generated)
visibility: characters M removed; replaced as double
(1811931 missing values generated)

Duplicates in terms of all variables

(746 observations deleted)

      count |      Freq.     Percent        Cum.
------------+-----------------------------------
          1 |  4,221,677       99.96       99.96
          2 |      1,762        0.04      100.00
------------+-----------------------------------
      Total |  4,223,439      100.00
date was long now str8
variable hour not found
r(111);

end of do-file

r(111);

.  replace time = time/100
variable time was int now float
(4,216,818 real changes made)

.  gen hour = floor(time)

. tab hour

       hour |      Freq.     Percent        Cum.
------------+-----------------------------------
          0 |    176,599        4.18        4.18
          1 |    177,550        4.20        8.39
          2 |    178,126        4.22       12.60
          3 |    178,665        4.23       16.83
          4 |    178,794        4.23       21.07
          5 |    178,502        4.23       25.29
          6 |    178,017        4.21       29.51
          7 |    178,049        4.22       33.72
          8 |    177,683        4.21       37.93
          9 |    177,159        4.19       42.13
         10 |    176,859        4.19       46.31
         11 |    175,487        4.16       50.47
         12 |    175,256        4.15       54.62
         13 |    175,085        4.15       58.76
         14 |    174,675        4.14       62.90
         15 |    173,995        4.12       67.02
         16 |    173,630        4.11       71.13
         17 |    173,424        4.11       75.24
         18 |    173,044        4.10       79.33
         19 |    173,174        4.10       83.43
         20 |    173,990        4.12       87.55
         21 |    174,834        4.14       91.69
         22 |    175,465        4.15       95.85
         23 |    175,377        4.15      100.00
------------+-----------------------------------
      Total |  4,223,439      100.00

.  collapse (mean) temp_celsius precipitation visibility relativehumidity clouds, by
> (wban date hour stationtype)

. do ~/google_drive/research/data/weather/bin/josh_data.do

. * Stata program to collapse and combine daily weather data for the US
. *
. * Jeff Shrader
. * First: 2015/07/21
. * Time-stamp: <2015-08-09 19:06:04 jgs>
. 
. * Preliminaries
. local dir "~/google_drive/research/data/weather"

. local data_ext "/Volumes/Data 2TB/data/weather"

. cd "`data_ext'"
/Volumes/Data 2TB/data/weather

. local download 0

. capture log close
------------------------------------------------------------------------------------
      name:  <unnamed>
       log:  /Users/jgs/google_drive/research/data/weather/bin/josh_weather_data.log
  log type:  text
 opened on:   9 Aug 2015, 19:06:07

. 
. * This is kludgey, but I need a datelist. This should be generated from dir
. local datelist "201403 201404 201405 201406 201407 201408 201409 201410 201411 201
> 412 201501 201502 201503 201504 201505 201506"

. 
. * We can add some code eventually to download the files directly.
. * Just modify this code:
. if "`download’" == "1" {
.    cd "`dir'/data/raw"
.    foreach i of local pollutants  {
  2.       foreach t of local years {
  3.          shell /usr/local/bin/wget -Odaily_`i'_`t'.zip "http://aqsdr1.epa.gov/a
> qsweb/aqstmp/airdata/daily_`i'_`t'.zip"
  4.       }
  5.    }
. }

. 
. * Unpack the data, collapse the hourly, and combine with the daily
. * Unzip
. /*
> local filelist: dir . files "QCLCD*.zip"
> foreach i of local filelist {
>    di "`i'"
>    * shell gzip -d `i'
>    shell unzip `i'
>    * unzipfile `i'
> }
> */
. * Iterate through, grabbing humidity and cloud cover from hourly
. foreach i of local datelist {
  2.    di "`i'"
  3.    import delimited using "QCLCD`i'/`i'hourly.txt", clear
  4.    keep wban date time stationtype drybulbcelsius hourlyprecip skycondition vis
> ibility relativehumidity
  5.    destring drybulbcelsius, replace ignore("M")
  6.    replace hourlyprecip = strtrim(hourlyprecip)
  7.    replace hourlyprecip = "0.001" if hourlyprecip == "T"
  8.    destring hourlyprecip, replace ignore("M")
  9.    destring relativehumidity, replace ignore("M")
 10.    gen clear = (substr(skycondition,1,3) == "CLR" | substr(skycondition,1,2) ==
>  "VV" | substr(skycondition,1,3) == "FEW")
 11.    replace clear = . if skycondition == "M"
 12.    gen clouds = 1 - clear
 13.    * Destring visibility as alternative to clouds
.    destring visibility, replace ignore("M")
 14.    * There are repeat observations for reasons that aren't totally clear
.    duplicates drop
 15.    bysort wban date time: gen count = _N
 16.    tab count
 17.    tostring date, replace
 18.    gen date1 = date(date, "YMD")
 19.    format date1 %d
 20.    drop date
 21.    rename date1 date
 22.    drop count clear skycondition
 23.    rename hourlyprecip precipitation
 24.    rename drybulbcelsius temp_celsius
 25.    * Collapsing to hourly
.    replace time = time/100
 26.    gen hour = floor(time)
 27.    collapse (mean) temp_celsius precipitation visibility relativehumidity cloud
> s, by(wban date hour stationtype)
 28.    
.    export delimited using "`i'hourly_proc.csv", replace
 29. }
201403
(44 vars, 4224185 obs)
drybulbcelsius: characters M removed; replaced as double
(18123 missing values generated)
(4,111,212 real changes made)
variable hourlyprecip was str4 now str5
(78,149 real changes made)
hourlyprecip has all characters numeric; replaced as double
(4033063 missing values generated)
relativehumidity: characters M removed; replaced as byte
(1874915 missing values generated)
(1,831,189 real changes made, 1,831,189 to missing)
(1,831,189 missing values generated)
visibility: characters M removed; replaced as double
(1811931 missing values generated)

Duplicates in terms of all variables

(746 observations deleted)

      count |      Freq.     Percent        Cum.
------------+-----------------------------------
          1 |  4,221,677       99.96       99.96
          2 |      1,762        0.04      100.00
------------+-----------------------------------
      Total |  4,223,439      100.00
date was long now str8
variable time was int now float
(4,216,818 real changes made)
file 201403hourly_proc.csv saved
201404
(44 vars, 3999576 obs)
drybulbcelsius: characters M removed; replaced as double
(15775 missing values generated)
(3,860,982 real changes made)
variable hourlyprecip was str4 now str5
(61,151 real changes made)
hourlyprecip has all characters numeric; replaced as double
(3799831 missing values generated)
relativehumidity: characters M removed; replaced as byte
(1726589 missing values generated)
(1,686,587 real changes made, 1,686,587 to missing)
(1,686,587 missing values generated)
visibility: characters M removed; replaced as double
(1671296 missing values generated)

Duplicates in terms of all variables

(690 observations deleted)

      count |      Freq.     Percent        Cum.
------------+-----------------------------------
          1 |  3,997,498       99.97       99.97
          2 |      1,388        0.03      100.00
------------+-----------------------------------
      Total |  3,998,886      100.00
date was long now str8
variable time was int now float
(3,992,708 real changes made)
(note: file 201404hourly_proc.csv not found)
file 201404hourly_proc.csv saved
201405
(44 vars, 4197465 obs)
drybulbcelsius: characters M removed; replaced as double
(17206 missing values generated)
(4,093,307 real changes made)
variable hourlyprecip was str4 now str5
(52,706 real changes made)
hourlyprecip has all characters numeric; replaced as double
(4040601 missing values generated)
relativehumidity: characters M removed; replaced as byte
(1874084 missing values generated)
(1,831,823 real changes made, 1,831,823 to missing)
(1,831,823 missing values generated)
visibility: characters M removed; replaced as double
(1808405 missing values generated)

Duplicates in terms of all variables

(896 observations deleted)

      count |      Freq.     Percent        Cum.
------------+-----------------------------------
          1 |  4,194,751       99.96       99.96
          2 |      1,818        0.04      100.00
------------+-----------------------------------
      Total |  4,196,569      100.00
date was long now str8
variable time was int now float
(4,190,027 real changes made)
(note: file 201405hourly_proc.csv not found)
file 201405hourly_proc.csv saved
201406
(44 vars, 3597427 obs)
drybulbcelsius: characters M removed; replaced as double
(22824 missing values generated)
(3,480,848 real changes made)
variable hourlyprecip was str4 now str5
(45,847 real changes made)
hourlyprecip has all characters numeric; replaced as double
(3435001 missing values generated)
relativehumidity: characters M removed; replaced as byte
(1345021 missing values generated)
(1,302,037 real changes made, 1,302,037 to missing)
(1,302,037 missing values generated)
visibility: characters M removed; replaced as double
(1283442 missing values generated)

Duplicates in terms of all variables

(546 observations deleted)

      count |      Freq.     Percent        Cum.
------------+-----------------------------------
          1 |  3,595,043       99.95       99.95
          2 |      1,838        0.05      100.00
------------+-----------------------------------
      Total |  3,596,881      100.00
date was long now str8
variable time was int now float
(3,592,124 real changes made)
(note: file 201406hourly_proc.csv not found)
file 201406hourly_proc.csv saved
201407
(44 vars, 3657465 obs)
drybulbcelsius: characters M removed; replaced as double
(19524 missing values generated)
(3,567,822 real changes made)
variable hourlyprecip was str4 now str5
(41,179 real changes made)
hourlyprecip has all characters numeric; replaced as double
(3526643 missing values generated)
relativehumidity: characters M removed; replaced as byte
(1433405 missing values generated)
(1,335,144 real changes made, 1,335,144 to missing)
(1,335,144 missing values generated)
visibility: characters M removed; replaced as double
(1318983 missing values generated)

Duplicates in terms of all variables

(523 observations deleted)

      count |      Freq.     Percent        Cum.
------------+-----------------------------------
          1 |  3,655,494       99.96       99.96
          2 |      1,448        0.04      100.00
------------+-----------------------------------
      Total |  3,656,942      100.00
date was long now str8
variable time was int now float
(3,652,121 real changes made)
(note: file 201407hourly_proc.csv not found)
file 201407hourly_proc.csv saved
201408
(44 vars, 4427485 obs)
drybulbcelsius: characters M removed; replaced as double
(30797 missing values generated)
(4,307,722 real changes made)
variable hourlyprecip was str4 now str5
(43,864 real changes made)
hourlyprecip has all characters numeric; replaced as double
(4263858 missing values generated)
relativehumidity: characters M removed; replaced as byte
(1474931 missing values generated)
(1,370,525 real changes made, 1,370,525 to missing)
(1,370,525 missing values generated)
visibility: characters M removed; replaced as double
(1343757 missing values generated)

Duplicates in terms of all variables

(580 observations deleted)

      count |      Freq.     Percent        Cum.
------------+-----------------------------------
          1 |  4,420,111       99.85       99.85
          2 |      6,794        0.15      100.00
------------+-----------------------------------
      Total |  4,426,905      100.00
date was long now str8
variable time was int now float
(4,421,676 real changes made)
(note: file 201408hourly_proc.csv not found)
file 201408hourly_proc.csv saved
201409
(44 vars, 4264718 obs)
drybulbcelsius: characters M removed; replaced as double
(33267 missing values generated)
(4,154,656 real changes made)
variable hourlyprecip was str4 now str5
(45,624 real changes made)
hourlyprecip has all characters numeric; replaced as double
(4109032 missing values generated)
relativehumidity: characters M removed; replaced as byte
(1538833 missing values generated)
(1,320,429 real changes made, 1,320,429 to missing)
(1,320,429 missing values generated)
visibility: characters M removed; replaced as double
(1291923 missing values generated)

Duplicates in terms of all variables

(650 observations deleted)

      count |      Freq.     Percent        Cum.
------------+-----------------------------------
          1 |  4,258,702       99.87       99.87
          2 |      5,366        0.13      100.00
------------+-----------------------------------
      Total |  4,264,068      100.00
date was long now str8
variable time was int now float
(4,258,980 real changes made)
(note: file 201409hourly_proc.csv not found)
file 201409hourly_proc.csv saved
201410
(44 vars, 4441311 obs)
drybulbcelsius: characters M removed; replaced as double
(27895 missing values generated)
(4,315,433 real changes made)
(59,240 real changes made)
hourlyprecip has all characters numeric; replaced as double
(4256193 missing values generated)
relativehumidity: characters M removed; replaced as byte
(1413799 missing values generated)
(1,357,161 real changes made, 1,357,161 to missing)
(1,357,161 missing values generated)
visibility: characters M removed; replaced as double
(1336633 missing values generated)

Duplicates in terms of all variables

(536 observations deleted)

      count |      Freq.     Percent        Cum.
------------+-----------------------------------
          1 |  4,432,551       99.81       99.81
          2 |      8,224        0.19      100.00
------------+-----------------------------------
      Total |  4,440,775      100.00
date was long now str8
variable time was int now float
(4,435,586 real changes made)
(note: file 201410hourly_proc.csv not found)
file 201410hourly_proc.csv saved
201411
(44 vars, 4320257 obs)
drybulbcelsius: characters M removed; replaced as double
(26962 missing values generated)
(4,181,847 real changes made)
variable hourlyprecip was str4 now str5
(78,613 real changes made)
hourlyprecip has all characters numeric; replaced as double
(4103234 missing values generated)
relativehumidity: characters M removed; replaced as byte
(1363994 missing values generated)
(1,311,949 real changes made, 1,311,949 to missing)
(1,311,949 missing values generated)
visibility: characters M removed; replaced as double
(1290754 missing values generated)

Duplicates in terms of all variables

(484 observations deleted)

      count |      Freq.     Percent        Cum.
------------+-----------------------------------
          1 |  4,315,485       99.90       99.90
          2 |      4,288        0.10      100.00
------------+-----------------------------------
      Total |  4,319,773      100.00
date was long now str8
variable time was int now float
(4,314,753 real changes made)
(note: file 201411hourly_proc.csv not found)
file 201411hourly_proc.csv saved
201412
(44 vars, 4577855 obs)
drybulbcelsius: characters M removed; replaced as double
(28514 missing values generated)
(4,411,588 real changes made)
variable hourlyprecip was str4 now str5
(95,216 real changes made)
hourlyprecip has all characters numeric; replaced as double
(4316372 missing values generated)
relativehumidity: characters M removed; replaced as byte
(1400278 missing values generated)
(1,328,610 real changes made, 1,328,610 to missing)
(1,328,610 missing values generated)
visibility: characters M removed; replaced as double
(1311514 missing values generated)

Duplicates in terms of all variables

(504 observations deleted)

      count |      Freq.     Percent        Cum.
------------+-----------------------------------
          1 |  4,569,597       99.83       99.83
          2 |      7,754        0.17      100.00
------------+-----------------------------------
      Total |  4,577,351      100.00
date was long now str8
variable time was int now float
(4,572,218 real changes made)
(note: file 201412hourly_proc.csv not found)
file 201412hourly_proc.csv saved
201501
(44 vars, 3689850 obs)
drybulbcelsius: characters M removed; replaced as double
(35752 missing values generated)
(3,567,867 real changes made)
(89,682 real changes made)
hourlyprecip has all characters numeric; replaced as double
(3478185 missing values generated)
relativehumidity: characters M removed; replaced as byte
(602304 missing values generated)
(517,113 real changes made, 517,113 to missing)
(517,113 missing values generated)
visibility: characters M removed; replaced as double
(501210 missing values generated)

Duplicates in terms of all variables

(619 observations deleted)

      count |      Freq.     Percent        Cum.
------------+-----------------------------------
          1 |  3,685,759       99.91       99.91
          2 |      3,472        0.09      100.00
------------+-----------------------------------
      Total |  3,689,231      100.00
date was long now str8
variable time was int now float
(3,686,975 real changes made)
(note: file 201501hourly_proc.csv not found)
file 201501hourly_proc.csv saved
201502
--Break--
r(1);

end of do-file

--Break--
r(1);

. do ~/google_drive/research/data/weather/bin/josh_data.do

. * Stata program to collapse and combine daily weather data for the US
. *
. * Jeff Shrader
. * First: 2015/07/21
. * Time-stamp: <2015-08-09 20:15:02 jgs>
. 
. * Preliminaries
. local dir "~/google_drive/research/data/weather"

. local data_ext "/Volumes/Data 2TB/data/weather"

. cd "`data_ext'"
/Volumes/Data 2TB/data/weather

. local download 0

. capture log close
------------------------------------------------------------------------------------
      name:  <unnamed>
       log:  /Users/jgs/google_drive/research/data/weather/bin/josh_weather_data.log
  log type:  text
 opened on:   9 Aug 2015, 20:15:11

. 
. * This is kludgey, but I need a datelist. This should be generated from dir
. local datelist "201403 201404 201405 201406 201407 201408 201409 201410 201411 201
> 412 201501 201502 201503 201504 201505 201506"

. 
. * We can add some code eventually to download the files directly.
. * Just modify this code:
. if "`download’" == "1" {
.    cd "`dir'/data/raw"
.    foreach i of local pollutants  {
  2.       foreach t of local years {
  3.          shell /usr/local/bin/wget -Odaily_`i'_`t'.zip "http://aqsdr1.epa.gov/a
> qsweb/aqstmp/airdata/daily_`i'_`t'.zip"
  4.       }
  5.    }
. }

. 
. * Unpack the data, collapse the hourly, and combine with the daily
. * Unzip
. /*
> local filelist: dir . files "QCLCD*.zip"
> foreach i of local filelist {
>    di "`i'"
>    * shell gzip -d `i'
>    shell unzip `i'
>    * unzipfile `i'
> }
> */
. * Iterate through, grabbing humidity and cloud cover from hourly
. foreach i of local datelist {
  2.    di "`i'"
  3.    import delimited using "QCLCD`i'/`i'hourly.txt", clear
  4.    * keep wban date time stationtype drybulbcelsius hourlyprecip skycondition v
> isibility relativehumidity
.    keep wban date time drybulbcelsius hourlyprecip skycondition visibility relativ
> ehumidity
  5.    destring drybulbcelsius, replace ignore("M")
  6.    replace hourlyprecip = strtrim(hourlyprecip)
  7.    replace hourlyprecip = "0.001" if hourlyprecip == "T"
  8.    destring hourlyprecip, replace ignore("M")
  9.    destring relativehumidity, replace ignore("M")
 10.    gen clear = (substr(skycondition,1,3) == "CLR" | substr(skycondition,1,2) ==
>  "VV" | substr(skycondition,1,3) == "FEW")
 11.    replace clear = . if skycondition == "M"
 12.    gen clouds = 1 - clear
 13.    * Destring visibility as alternative to clouds
.    destring visibility, replace ignore("M")
 14.    * There are repeat observations for reasons that aren't totally clear
.    duplicates drop
 15.    bysort wban date time: gen count = _N
 16.    tab count
 17.    tostring date, replace
 18.    gen date1 = date(date, "YMD")
 19.    format date1 %d
 20.    drop date
 21.    rename date1 date
 22.    drop count clear skycondition
 23.    rename hourlyprecip precipitation
 24.    rename drybulbcelsius temp_celsius
 25.    * Collapsing to hourly
.    replace time = time/100
 26.    gen hour = floor(time)
 27.    collapse (mean) temp_celsius precipitation visibility relativehumidity cloud
> s, by(wban date hour)
 28.    bysort wban date: egen max_temp = max(temp)
 29.    bysort wban date: egen min_temp = min(temp)
 30.    
.    export delimited using "`i'hourly_proc.csv", replace
 31. }
201403
(44 vars, 4224185 obs)
drybulbcelsius: characters M removed; replaced as double
(18123 missing values generated)
(4,111,212 real changes made)
variable hourlyprecip was str4 now str5
(78,149 real changes made)
hourlyprecip has all characters numeric; replaced as double
(4033063 missing values generated)
relativehumidity: characters M removed; replaced as byte
(1874915 missing values generated)
(1,831,189 real changes made, 1,831,189 to missing)
(1,831,189 missing values generated)
visibility: characters M removed; replaced as double
(1811931 missing values generated)

Duplicates in terms of all variables

(746 observations deleted)

      count |      Freq.     Percent        Cum.
------------+-----------------------------------
          1 |  4,221,677       99.96       99.96
          2 |      1,762        0.04      100.00
------------+-----------------------------------
      Total |  4,223,439      100.00
date was long now str8
variable time was int now float
(4,216,818 real changes made)
(4264 missing values generated)
(4264 missing values generated)
file 201403hourly_proc.csv saved
201404
(44 vars, 3999576 obs)
drybulbcelsius: characters M removed; replaced as double
(15775 missing values generated)
(3,860,982 real changes made)
variable hourlyprecip was str4 now str5
(61,151 real changes made)
hourlyprecip has all characters numeric; replaced as double
(3799831 missing values generated)
relativehumidity: characters M removed; replaced as byte
(1726589 missing values generated)
(1,686,587 real changes made, 1,686,587 to missing)
(1,686,587 missing values generated)
visibility: characters M removed; replaced as double
(1671296 missing values generated)

Duplicates in terms of all variables

(690 observations deleted)

      count |      Freq.     Percent        Cum.
------------+-----------------------------------
          1 |  3,997,498       99.97       99.97
          2 |      1,388        0.03      100.00
------------+-----------------------------------
      Total |  3,998,886      100.00
date was long now str8
variable time was int now float
(3,992,708 real changes made)
(3756 missing values generated)
(3756 missing values generated)
file 201404hourly_proc.csv saved
201405
(44 vars, 4197465 obs)
drybulbcelsius: characters M removed; replaced as double
(17206 missing values generated)
(4,093,307 real changes made)
variable hourlyprecip was str4 now str5
(52,706 real changes made)
hourlyprecip has all characters numeric; replaced as double
(4040601 missing values generated)
relativehumidity: characters M removed; replaced as byte
(1874084 missing values generated)
(1,831,823 real changes made, 1,831,823 to missing)
(1,831,823 missing values generated)
visibility: characters M removed; replaced as double
(1808405 missing values generated)

Duplicates in terms of all variables

(896 observations deleted)

      count |      Freq.     Percent        Cum.
------------+-----------------------------------
          1 |  4,194,751       99.96       99.96
          2 |      1,818        0.04      100.00
------------+-----------------------------------
      Total |  4,196,569      100.00
date was long now str8
variable time was int now float
(4,190,027 real changes made)
(3422 missing values generated)
(3422 missing values generated)
file 201405hourly_proc.csv saved
201406
(44 vars, 3597427 obs)
drybulbcelsius: characters M removed; replaced as double
(22824 missing values generated)
(3,480,848 real changes made)
variable hourlyprecip was str4 now str5
(45,847 real changes made)
hourlyprecip has all characters numeric; replaced as double
(3435001 missing values generated)
relativehumidity: characters M removed; replaced as byte
(1345021 missing values generated)
(1,302,037 real changes made, 1,302,037 to missing)
(1,302,037 missing values generated)
visibility: characters M removed; replaced as double
(1283442 missing values generated)

Duplicates in terms of all variables

(546 observations deleted)

      count |      Freq.     Percent        Cum.
------------+-----------------------------------
          1 |  3,595,043       99.95       99.95
          2 |      1,838        0.05      100.00
------------+-----------------------------------
      Total |  3,596,881      100.00
date was long now str8
variable time was int now float
(3,592,124 real changes made)
(6005 missing values generated)
(6005 missing values generated)
file 201406hourly_proc.csv saved
201407
(44 vars, 3657465 obs)
drybulbcelsius: characters M removed; replaced as double
(19524 missing values generated)
(3,567,822 real changes made)
variable hourlyprecip was str4 now str5
(41,179 real changes made)
hourlyprecip has all characters numeric; replaced as double
(3526643 missing values generated)
relativehumidity: characters M removed; replaced as byte
(1433405 missing values generated)
(1,335,144 real changes made, 1,335,144 to missing)
(1,335,144 missing values generated)
visibility: characters M removed; replaced as double
(1318983 missing values generated)

Duplicates in terms of all variables

(523 observations deleted)

      count |      Freq.     Percent        Cum.
------------+-----------------------------------
          1 |  3,655,494       99.96       99.96
          2 |      1,448        0.04      100.00
------------+-----------------------------------
      Total |  3,656,942      100.00
date was long now str8
variable time was int now float
(3,652,121 real changes made)
(5219 missing values generated)
(5219 missing values generated)
file 201407hourly_proc.csv saved
201408
(44 vars, 4427485 obs)
drybulbcelsius: characters M removed; replaced as double
(30797 missing values generated)
(4,307,722 real changes made)
variable hourlyprecip was str4 now str5
(43,864 real changes made)
hourlyprecip has all characters numeric; replaced as double
(4263858 missing values generated)
relativehumidity: characters M removed; replaced as byte
(1474931 missing values generated)
(1,370,525 real changes made, 1,370,525 to missing)
(1,370,525 missing values generated)
visibility: characters M removed; replaced as double
(1343757 missing values generated)

Duplicates in terms of all variables

(580 observations deleted)

      count |      Freq.     Percent        Cum.
------------+-----------------------------------
          1 |  4,420,111       99.85       99.85
          2 |      6,794        0.15      100.00
------------+-----------------------------------
      Total |  4,426,905      100.00
date was long now str8
variable time was int now float
(4,421,676 real changes made)
(7753 missing values generated)
(7753 missing values generated)
file 201408hourly_proc.csv saved
201409
(44 vars, 4264718 obs)
drybulbcelsius: characters M removed; replaced as double
(33267 missing values generated)
(4,154,656 real changes made)
variable hourlyprecip was str4 now str5
(45,624 real changes made)
hourlyprecip has all characters numeric; replaced as double
(4109032 missing values generated)
relativehumidity: characters M removed; replaced as byte
(1538833 missing values generated)
(1,320,429 real changes made, 1,320,429 to missing)
(1,320,429 missing values generated)
visibility: characters M removed; replaced as double
(1291923 missing values generated)

Duplicates in terms of all variables

(650 observations deleted)

      count |      Freq.     Percent        Cum.
------------+-----------------------------------
          1 |  4,258,702       99.87       99.87
          2 |      5,366        0.13      100.00
------------+-----------------------------------
      Total |  4,264,068      100.00
date was long now str8
variable time was int now float
(4,258,980 real changes made)
(8344 missing values generated)
(8344 missing values generated)
file 201409hourly_proc.csv saved
201410
(44 vars, 4441311 obs)
drybulbcelsius: characters M removed; replaced as double
(27895 missing values generated)
(4,315,433 real changes made)
(59,240 real changes made)
hourlyprecip has all characters numeric; replaced as double
(4256193 missing values generated)
relativehumidity: characters M removed; replaced as byte
(1413799 missing values generated)
(1,357,161 real changes made, 1,357,161 to missing)
(1,357,161 missing values generated)
visibility: characters M removed; replaced as double
(1336633 missing values generated)

Duplicates in terms of all variables

(536 observations deleted)

      count |      Freq.     Percent        Cum.
------------+-----------------------------------
          1 |  4,432,551       99.81       99.81
          2 |      8,224        0.19      100.00
------------+-----------------------------------
      Total |  4,440,775      100.00
date was long now str8
variable time was int now float
(4,435,586 real changes made)
(6534 missing values generated)
(6534 missing values generated)
file 201410hourly_proc.csv saved
201411
(44 vars, 4320257 obs)
drybulbcelsius: characters M removed; replaced as double
(26962 missing values generated)
(4,181,847 real changes made)
variable hourlyprecip was str4 now str5
(78,613 real changes made)
hourlyprecip has all characters numeric; replaced as double
(4103234 missing values generated)
relativehumidity: characters M removed; replaced as byte
(1363994 missing values generated)
(1,311,949 real changes made, 1,311,949 to missing)
(1,311,949 missing values generated)
visibility: characters M removed; replaced as double
(1290754 missing values generated)

Duplicates in terms of all variables

(484 observations deleted)

      count |      Freq.     Percent        Cum.
------------+-----------------------------------
          1 |  4,315,485       99.90       99.90
          2 |      4,288        0.10      100.00
------------+-----------------------------------
      Total |  4,319,773      100.00
date was long now str8
variable time was int now float
(4,314,753 real changes made)
(5878 missing values generated)
(5878 missing values generated)
file 201411hourly_proc.csv saved
201412
(44 vars, 4577855 obs)
drybulbcelsius: characters M removed; replaced as double
(28514 missing values generated)
(4,411,588 real changes made)
variable hourlyprecip was str4 now str5
(95,216 real changes made)
hourlyprecip has all characters numeric; replaced as double
(4316372 missing values generated)
relativehumidity: characters M removed; replaced as byte
(1400278 missing values generated)
(1,328,610 real changes made, 1,328,610 to missing)
(1,328,610 missing values generated)
visibility: characters M removed; replaced as double
(1311514 missing values generated)

Duplicates in terms of all variables

(504 observations deleted)

      count |      Freq.     Percent        Cum.
------------+-----------------------------------
          1 |  4,569,597       99.83       99.83
          2 |      7,754        0.17      100.00
------------+-----------------------------------
      Total |  4,577,351      100.00
date was long now str8
variable time was int now float
(4,572,218 real changes made)
(6314 missing values generated)
(6314 missing values generated)
file 201412hourly_proc.csv saved
201501
(44 vars, 3689850 obs)
drybulbcelsius: characters M removed; replaced as double
(35752 missing values generated)
(3,567,867 real changes made)
(89,682 real changes made)
hourlyprecip has all characters numeric; replaced as double
(3478185 missing values generated)
relativehumidity: characters M removed; replaced as byte
(602304 missing values generated)
(517,113 real changes made, 517,113 to missing)
(517,113 missing values generated)
visibility: characters M removed; replaced as double
(501210 missing values generated)

Duplicates in terms of all variables

(619 observations deleted)

      count |      Freq.     Percent        Cum.
------------+-----------------------------------
          1 |  3,685,759       99.91       99.91
          2 |      3,472        0.09      100.00
------------+-----------------------------------
      Total |  3,689,231      100.00
date was long now str8
variable time was int now float
(3,686,975 real changes made)
(8516 missing values generated)
(8516 missing values generated)
file 201501hourly_proc.csv saved
201502
(44 vars, 3910498 obs)
drybulbcelsius: characters M removed; replaced as double
(24056 missing values generated)
(3,806,729 real changes made)
(89,146 real changes made)
hourlyprecip has all characters numeric; replaced as double
(3717583 missing values generated)
relativehumidity: characters M removed; replaced as byte
(1299639 missing values generated)
(1,171,327 real changes made, 1,171,327 to missing)
(1,171,327 missing values generated)
visibility: characters M removed; replaced as double
(1156894 missing values generated)

Duplicates in terms of all variables

(469 observations deleted)

      count |      Freq.     Percent        Cum.
------------+-----------------------------------
          1 |  3,903,515       99.83       99.83
          2 |      6,514        0.17      100.00
------------+-----------------------------------
      Total |  3,910,029      100.00
date was long now str8
variable time was int now float
(3,905,535 real changes made)
(5534 missing values generated)
(5534 missing values generated)
(note: file 201502hourly_proc.csv not found)
file 201502hourly_proc.csv saved
201503
(44 vars, 4496262 obs)
drybulbcelsius: characters M removed; replaced as double
(26773 missing values generated)
(4,339,750 real changes made)
variable hourlyprecip was str4 now str5
(76,470 real changes made)
hourlyprecip has all characters numeric; replaced as double
(4263280 missing values generated)
relativehumidity: characters M removed; replaced as byte
(1427666 missing values generated)
(1,354,913 real changes made, 1,354,913 to missing)
(1,354,913 missing values generated)
visibility: characters M removed; replaced as double
(1333187 missing values generated)

Duplicates in terms of all variables

(816 observations deleted)

      count |      Freq.     Percent        Cum.
------------+-----------------------------------
          1 |  4,489,206       99.86       99.86
          2 |      6,240        0.14      100.00
------------+-----------------------------------
      Total |  4,495,446      100.00
date was long now str8
variable time was int now float
(4,490,283 real changes made)
(5564 missing values generated)
(5564 missing values generated)
(note: file 201503hourly_proc.csv not found)
file 201503hourly_proc.csv saved
201504
(44 vars, 4221100 obs)
drybulbcelsius: characters M removed; replaced as double
(26489 missing values generated)
(4,083,289 real changes made)
variable hourlyprecip was str4 now str5
(68,227 real changes made)
hourlyprecip has all characters numeric; replaced as double
(4015062 missing values generated)
relativehumidity: characters M removed; replaced as byte
(1505409 missing values generated)
(1,275,061 real changes made, 1,275,061 to missing)
(1,275,061 missing values generated)
visibility: characters M removed; replaced as double
(1259257 missing values generated)

Duplicates in terms of all variables

(564 observations deleted)

      count |      Freq.     Percent        Cum.
------------+-----------------------------------
          1 |  4,215,154       99.87       99.87
          2 |      5,382        0.13      100.00
------------+-----------------------------------
      Total |  4,220,536      100.00
date was long now str8
variable time was int now float
(4,215,609 real changes made)
(6213 missing values generated)
(6213 missing values generated)
(note: file 201504hourly_proc.csv not found)
file 201504hourly_proc.csv saved
201505
(44 vars, 4472885 obs)
drybulbcelsius: characters M removed; replaced as double
(35638 missing values generated)
(4,296,619 real changes made)
variable hourlyprecip was str4 now str5
(58,350 real changes made)
hourlyprecip has all characters numeric; replaced as double
(4238269 missing values generated)
relativehumidity: characters M removed; replaced as byte
(1399581 missing values generated)
(1,355,599 real changes made, 1,355,599 to missing)
(1,355,599 missing values generated)
visibility: characters M removed; replaced as double
(1332151 missing values generated)

Duplicates in terms of all variables

(644 observations deleted)

      count |      Freq.     Percent        Cum.
------------+-----------------------------------
          1 |  4,467,743       99.90       99.90
          2 |      4,498        0.10      100.00
------------+-----------------------------------
      Total |  4,472,241      100.00
date was long now str8
variable time was int now float
(4,467,125 real changes made)
(8526 missing values generated)
(8526 missing values generated)
(note: file 201505hourly_proc.csv not found)
file 201505hourly_proc.csv saved
201506
(44 vars, 4293650 obs)
drybulbcelsius: characters M removed; replaced as double
(43963 missing values generated)
(4,153,572 real changes made)
variable hourlyprecip was str4 now str5
(49,580 real changes made)
hourlyprecip has all characters numeric; replaced as double
(4103992 missing values generated)
relativehumidity: characters M removed; replaced as byte
(1395760 missing values generated)
(1,334,910 real changes made, 1,334,910 to missing)
(1,334,910 missing values generated)
visibility: characters M removed; replaced as double
(1295807 missing values generated)

Duplicates in terms of all variables

(835 observations deleted)

      count |      Freq.     Percent        Cum.
------------+-----------------------------------
          1 |  4,288,235       99.89       99.89
          2 |      4,580        0.11      100.00
------------+-----------------------------------
      Total |  4,292,815      100.00
date was long now str8
variable time was int now float
(4,287,849 real changes made)
(10723 missing values generated)
(10723 missing values generated)
(note: file 201506hourly_proc.csv not found)
file 201506hourly_proc.csv saved

. 
. log close
      name:  <unnamed>
       log:  /Users/jgs/google_drive/research/data/weather/bin/josh_weather_data.log
  log type:  text
 closed on:   9 Aug 2015, 22:26:15
------------------------------------------------------------------------------------
